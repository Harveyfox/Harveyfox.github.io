<!---<!DOCTYPE html>
<html>
<head>
  <title>Canvas Image Upload</title>
</head>
<body>

  <canvas id="productCanvas" width="400" height="300"></canvas>

  <button onclick="downloadCanvasImage()">Download Canvas</button>
  
  <button onclick="openImageUploader()">Upload Image</button>

  <script>
    // Function to handle messages from the image.html page
    window.addEventListener('message', function(event) {
      if (event.data && event.data.imageDataURL) {
        // Draw the uploaded image on the canvas
        showImageOnCanvas(event.data.imageDataURL);
      }
    });

    // Function to draw the image on the canvas
    function showImageOnCanvas(imageDataURL) {
      const canvas = document.getElementById('productCanvas');
      const ctx = canvas.getContext('2d');

      // Clear the canvas before drawing the image
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Create a new image element and load the selected image
      const image = new Image();
      image.onload = function() {
        ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
      };
      image.src = imageDataURL;
    }

    // Function to download the canvas content with the image
    function downloadCanvasImage() {
      const canvas = document.getElementById('productCanvas');
      const dataURL = canvas.toDataURL('image/png');

      // Create a temporary link element
      const link = document.createElement('a');
      link.href = dataURL;
      link.download = 'product_image.png';

      // Trigger a click event on the link to initiate the download
      link.click();
    }

    // Function to open the image.html page for image selection
    function openImageUploader() {
      window.open('image.html', '_blank');
    }
  </script>
</body>
</html>-->

<!--<!DOCTYPE html>
<html>
<head>
  <title>Canvas Image Upload</title>
</head>
<body>

  <canvas id="productCanvas" width="400" height="300"></canvas>

  <button onclick="downloadCanvasImage()">Download Canvas</button>

  <button onclick="openImageUploader()">Upload Image</button>

  <script>
    // Function to handle messages from the image.html page
    window.addEventListener('message', function(event) {
      if (event.data && event.data.imageDataURL) {
        // Draw the uploaded image on the canvas
        showImageOnCanvas(event.data.imageDataURL);
      }
    });

    // Function to draw the image on the canvas
    function showImageOnCanvas(imageDataURL) {
      const canvas = document.getElementById('productCanvas');
      const ctx = canvas.getContext('2d');

      // Clear the canvas before drawing the image
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Create a new image element and load the selected image
      const image = new Image();
      image.onload = function() {
        ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
      };
      image.src = imageDataURL;
    }

    // Function to download the canvas content with the image
    function downloadCanvasImage() {
      const canvas = document.getElementById('productCanvas');
      const dataURL = canvas.toDataURL('image/png');

      // Create a temporary link element
      const link = document.createElement('a');
      link.href = dataURL;
      link.download = 'product_image.png';

      // Trigger a click event on the link to initiate the download
      link.click();
    }

    // Function to open the image.html page for image selection
    function openImageUploader() {
      window.open('image.html', '_blank');
    }
  </script>
</body>
</html>-->

<!------------------------------------------------------------------------------------------>
<!DOCTYPE html>
 <html>
 <head>
     <title>Image Canvas</title>
     <style>
       
     </style>
 </head>
 <body>
     <div id="canvasContainer">
         <img id="image1" class="canvasImage" src="" alt="Image 1">
         <img id="image2" class="canvasImage" src="" alt="Image 2">
     </div>
     <input type="file" id="uploadImage1">
     <input type="file" id="uploadImage2">
     <br>
 
     <script>
         const image1 = document.getElementById('image1');
         const image2 = document.getElementById('image2');
         const uploadImage1 = document.getElementById('uploadImage1');
         const uploadImage2 = document.getElementById('uploadImage2');
         const image1Size = document.getElementById('image1Size');
         const image2Size = document.getElementById('image2Size');
         
 
     </script>



    <title>Image Canvas</title>
    <style>
        #canvasContainer {
            position: relative;
            width: 500px;
            height: 500px;
            border: 2px solid black;
            overflow: hidden;
        }
        .canvasImage {
            position: absolute;
        }
    </style>

    
    <script>
    
        
        uploadImage1.addEventListener('change', () => {
            const file = uploadImage1.files[0];
            if (file) {
                image1.src = URL.createObjectURL(file);
            }
        });
        
        uploadImage2.addEventListener('change', () => {
            const file = uploadImage2.files[0];
            if (file) {
                image2.src = URL.createObjectURL(file);
            }
        });
        
        image1Size.addEventListener('input', () => {
            image1.style.width = `${image1Size.value}%`;
        });
        
        image2Size.addEventListener('input', () => {
            image2.style.width = `${image2Size.value}%`;
        });
    </script>

<!DOCTYPE html>
<html>
<head>
    <title>Image Canvas</title>
    <style>
        #canvasContainer {
            position: relative;
            width: 500px;
            height: 500px;
            border: 2px solid black;
            overflow: hidden;
        }
        .canvasImage {
            position: absolute;
        }
    </style>
</head>
<body>

     
    Image 1 Width: <input type="number" id="image1Width" value="100"> px
    Image 1 Height: <input type="number" id="image1Height" value="100"> px
    Image 2 Width: <input type="number" id="image2Width" value="100"> px
    Image 2 Height: <input type="number" id="image2Height" value="100"> px

    <script>
    
        const image1Width = document.getElementById('image1Width');
        const image1Height = document.getElementById('image1Height');
        const image2Width = document.getElementById('image2Width');
        const image2Height = document.getElementById('image2Height');
        
        // Rest of the drag functionality code remains unchanged
        // ...

        image1Width.addEventListener('input', updateImageDimensions);
        image1Height.addEventListener('input', updateImageDimensions);
        image2Width.addEventListener('input', updateImageDimensions);
        image2Height.addEventListener('input', updateImageDimensions);

        function updateImageDimensions() {
            image1.style.width = `${image1Width.value}px`;
            image1.style.height = `${image1Height.value}px`;
            image2.style.width = `${image2Width.value}px`;
            image2.style.height = `${image2Height.value}px`;
        }

        // Rest of the code remains unchanged
        // ...


   
    </script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <title>Image Canvas</title>
   
</head>
<body>
  
 
    22222<button id="downloadButton">Download Canvas</button>



   <!--- <script>
     

        const downloadButton = document.getElementById('downloadButton');
        downloadButton.addEventListener('click', downloadCanvas);

        function downloadCanvas() {
            const canvasContainer = document.getElementById('canvasContainer');
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');

            canvas.width = canvasContainer.offsetWidth;
            canvas.height = canvasContainer.offsetHeight;

            // Clear canvas before drawing images
            context.clearRect(0, 0, canvas.width, canvas.height);

            // Draw images onto the canvas
            context.drawImage(image1, parseInt(image1.style.left), parseInt(image1.style.top), parseInt(image1.style.width), parseInt(image1.style.height));
            context.drawImage(image2, parseInt(image2.style.left), parseInt(image2.style.top), parseInt(image2.style.width), parseInt(image2.style.height));

            // Convert the canvas content to a data URL
            const dataURL = canvas.toDataURL('image/png');

            // Create a link element and trigger the download
            const downloadLink = document.createElement('a');
            downloadLink.href = dataURL;
            downloadLink.download = 'canvas_image.png';
            downloadLink.click();
        }
    </script>-->

<script>



</script>


<div>
    <label for="xRange">Move Image 2 on X-axis:</label>
    <input type="range" id="xRange" min="0" max="100" value="50">
</div>
<div>
    <label for="yRange">Move Image 2 on Y-axis:</label>
    <input type="range" id="yRange" min="0" max="100" value="50">
</div>



 


<script>



 

 const canvasContainer = document.getElementById('canvasContainer');
    const canvasWidth = canvasContainer.offsetWidth;
    const canvasHeight = canvasContainer.offsetHeight;

    // Initial position of image 2
    let image2X = canvasWidth / 2; // Center x-coordinate
    let image2Y = canvasHeight / 2; // Center y-coordinate

    const xRange = document.getElementById('xRange');
    const yRange = document.getElementById('yRange');

    xRange.addEventListener('input', moveImageX);
    yRange.addEventListener('input', moveImageY);

    function moveImageX() {
        const rangeValue = parseInt(xRange.value);
        const newX = (canvasWidth - parseInt(image2.style.width)) * (rangeValue / 100);
        moveImage2(newX, image2Y);
    }

    function moveImageY() {
        const rangeValue = parseInt(yRange.value);
        const newY = (canvasHeight - parseInt(image2.style.height)) * (rangeValue / 100);
        moveImage2(image2X, newY);
    }



    function moveImage2(x, y) {
        // Existing code for moving image 2
     
    } 
    
  
    xRange.addEventListener('input', moveImageX);
    yRange.addEventListener('input', moveImageY);

    // Drag variables
   
    let offsetX = 0;
    let offsetY = 0;

    // Event listeners for touch and mouse events
    image2.addEventListener('mousedown', startDrag);
    image2.addEventListener('touchstart', startDrag, { passive: false });

    document.addEventListener('mousemove', moveImage);
    document.addEventListener('mouseup', stopDrag);
    document.addEventListener('touchmove', moveImage, { passive: false });
    document.addEventListener('touchend', stopDrag);

    function startDrag(event) {
        event.preventDefault(); // Prevent touch scrolling
        dragging = true;
        dragImage = event.target;
        dragImage.style.zIndex = '1000';

        const rect = dragImage.getBoundingClientRect();
        offsetX = event.clientX - rect.left;
        offsetY = event.clientY - rect.top;
    }

    function moveImage(event) {
        if (dragging) {
            event.preventDefault(); // Prevent touch scrolling

            let clientX, clientY;

            if (event.type === 'mousemove') {
                clientX = event.clientX;
                clientY = event.clientY;
            } else if (event.type === 'touchmove') {
                clientX = event.touches[0].clientX;
                clientY = event.touches[0].clientY;
            }

            const newX = clientX - offsetX;
            const newY = clientY - offsetY;

            // Move the image within canvas bounds
            const minX = 0;
            const maxX = canvasWidth - parseInt(image2.style.width);
            const minY = 0;
            const maxY = canvasHeight - parseInt(image2.style.height);
            image2X = Math.max(minX, Math.min(maxX, newX));
            image2Y = Math.max(minY, Math.min(maxY, newY));

            // Update image position
            image2.style.left = `${image2X}px`;
            image2.style.top = `${image2Y}px`;
        }
    }

    function stopDrag() {
        dragging = false;
        if (dragImage) {
            dragImage.style.zIndex = 'auto';
            dragImage = null;
        }
    }


// Update image position based on input ranges
function updateImagePosition() {
    const xRange = document.getElementById('xRange');
    const yRange = document.getElementById('yRange');
    
    const xPercentage = parseInt(xRange.value);
    const yPercentage = parseInt(yRange.value);

    const image2Width = parseInt(image2.style.width);
    const image2Height = parseInt(image2.style.height);

    const maxX = canvasWidth - image2Width;
    const maxY = canvasHeight - image2Height;

    const newX = (maxX * xPercentage) / 100;
    const newY = (maxY * yPercentage) / 100;

    image2.style.left = `${newX}px`;
    image2.style.top = `${newY}px`;
}

// Add input event listeners to update image position

xRange.addEventListener('input', updateImagePosition);
yRange.addEventListener('input', updateImagePosition);
</script>


  <script>

    const downloadButton = document.getElementById('downloadButton');
    downloadButton.addEventListener('click', downloadCanvas);

    function downloadCanvas() {
        const canvasContainer = document.getElementById('canvasContainer');
        const canvas = document.createElement('canvas');
        const context = canvas.getContext('2d');

        canvas.width = canvasContainer.offsetWidth;
        canvas.height = canvasContainer.offsetHeight;

        // Reference loaded images
        const image1 = document.getElementById('image1');
        const image2 = document.getElementById('image2');

        // Draw images onto canvas
        context.drawImage(image1, parseInt(image1.style.left), parseInt(image1.style.top), parseInt(image1.style.width), parseInt(image1.style.height));
        context.drawImage(image2, parseInt(image2.style.left), parseInt(image2.style.top), parseInt(image2.style.width), parseInt(image2.style.height));

        // Convert canvas content to Blob
        canvas.toBlob(blob => {
            const blobUrl = URL.createObjectURL(blob);
            const downloadLink = document.createElement('a');
            downloadLink.href = blobUrl;
            downloadLink.download = 'canvas_image.png';
            downloadLink.click();
            URL.revokeObjectURL(blobUrl);
        }, 'image/png');
    }
  </script>
